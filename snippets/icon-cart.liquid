<div id="lrc-icon-cart" class="flex items-center justify-center"></div>

<script
  type="text/babel"
>
  function CartIcon() {
    const [cartCount, setCartCount] = React.useState(0);

    React.useEffect(() => {
      const handler = function (event) {
        const { count } = event.detail;
        setCartCount(count);
      };
      document.addEventListener('cart_count_change', handler);
      return () => {
        document.removeEventListener('cart_count_change', handler);
      };
    }, [setCartCount]);

    return (
      <div
        onClick={() => document.dispatchEvent(new CustomEvent('cart_toggle'))}
        className="flex items-center justify-center cursor-pointer relative group"
      >
        {cartCount > 0 ? (
          <div className="absolute top-0 right-0 z-10 w-6 h-6 rounded-full bg-cyan-100 border-cyan-200 border flex items-center justify-center group-hover:scale-[1.07]">
            <span className="text-sm font-medium text-cyan-700 group-hover:scale-[1.07]">{cartCount}</span>
          </div>
        ) : null}
        <svg
          class="icon icon-cart"
          aria-hidden="true"
          focusable="false"
          viewBox="0 0 40 40"
          className="w-[2.5rem] h-[2.5rem] lg:w-[4rem] lg:h-[4rem] transform group-hover:scale-[1.07] text-[#207A85]"
          fill="none"
        >
          <path
            fill="currentColor"
            fillRule="evenodd"
            d="M20.5 6.5a4.75 4.75 0 00-4.75 4.75v.56h-3.16l-.77 11.6a5 5 0 004.99 5.34h7.38a5 5 0 004.99-5.33l-.77-11.6h-3.16v-.57A4.75 4.75 0 0020.5 6.5zm3.75 5.31v-.56a3.75 3.75 0 10-7.5 0v.56h7.5zm-7.5 1h7.5v.56a3.75 3.75 0 11-7.5 0v-.56zm-1 0v.56a4.75 4.75 0 109.5 0v-.56h2.22l.71 10.67a4 4 0 01-3.99 4.27h-7.38a4 4 0 01-4-4.27l.72-10.67h2.22z"
          />
        </svg>
      </div>
    );
  }

  ReactDOM.render(<CartIcon />, document.getElementById('lrc-icon-cart'));
</script>
